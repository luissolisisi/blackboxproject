$(document).ready(function(){function a(){$(".md-modal").css("display","none"),$(".md-overlay").css("display","none")}$(".md-trigger").modalEffects(),$(document).on("click","#bapoderado",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-persona"),c="mostrar_pagina_datos_adicionales?v="+b+"&v2="+a;document.location=c}),$(".crear").on("click",function(a){a.preventDefault();var b=$(this).data("id"),c=$(this).data("nombre"),d=$(this).data("cliente");$.ajax({type:"post",dataType:"json",url:"subir_archivos",data:"id="+b+"&cliente="+d+"&n="+c,success:function(a){if("CREADO"==a.mensaje)alert("El directorio ha sido creado correctamente, da clic de nuevo para subir los documentos.");else if("EXISTE"==a.mensaje){var e="listado_documentos_digitales?id="+b+"&c="+d+"&n="+c;document.location=e}},error:function(a,b,c){console.log(c)},complete:function(){console.log("Complete")}})}),Dropzone.autoDiscover=!1,$("#my-awesome-dropzone").dropzone({url:"mover_documentos",addRemoveLinks:!1,maxFileSize:10485760,dictResponseError:"Ha ocurrido un error en el servidor.",acceptedFiles:".jpeg,.jpg,.png,.JPEG,.JPG,.PNG,application/pdf",success:function(a){"success"==a.status&&(alert("El archivo "+a.name+" ha subido correctamente."),location.reload(!0))},error:function(a){alert("Error subiendo el archivo "+a.name)},removedfile:function(a,b){var c=a.name;$.ajax({type:"POST",url:"mover_documentos?delete=true",data:"filename="+c,success:function(b){var d=JSON.parse(b);if(1==d.res){var e;null!=(e=a.previewElement)&&e.parentNode.removeChild(a.previewElement),alert("El elemento fué eliminado: "+c)}}})}}),$(document).on("click","#agregardatoadf",function(){var a=$(this).attr("data-persona"),c=($(this).attr("data-new"),$(this).attr("data-table")),d=$(this).attr("data-idexpediente");params={},params.persona=a,params.table=c,params.idexpediente=d,window.location.href="get_form_datos_adicionales?persona="+a+"&idexpediente="+d}),$(document).on("click","#agregardatoadm",function(){var a=$(this).attr("data-persona"),c=($(this).attr("data-new"),$(this).attr("data-table")),d=$(this).attr("data-idexpediente");params={},params.persona=a,params.table=c,params.idexpediente=d,window.location.href="get_form_datos_adicionales?persona="+a+"&idexpediente="+d}),$("#frmdatosadicionales").on("submit",function(b){b.preventDefault();var d=($(this),window.location.href),e=!1,f=$("#GENERO"),g=$("#T2"),h=$("#T3"),i=$("#T1"),k=($("#T12"),$("#T19")),l=$("#T16"),m="<ul>",n=$("#T4"),o=$("#T9"),p=$("#T10"),q=$("#T17");$("#T30");if(d.includes("MORAL")||(f.is(":checked")&&genero2.is(":checked")?bndera=!0:(e=!1,m+="<li>El <strong>campo genero</strong> es obligatorio</li>")),void 0!=g.val()&&(vLongitud(g,"Ingrese de 3 a 30 caracteres",3,30)&&vConsecutivos(g,"Ingrese un apellido valido")?e=!0:(e=!1,m+="<li>El <strong>campo apellido paterno</strong> es obligatorio</li>"),vLongitud(h,"Ingrese de 3 a 30 caracteres",3,30)&&vConsecutivos(h,"Ingrese un apellido valido")?e=!0:(e=!1,m+="<li>El <strong>campo apellido materno</strong> es obligatorio</li>")),vLongitud(i,"Ingrese de 3 a 30 caracteres",3,30)&&vConsecutivos(i,"Ingrese un nombre valido")?e=!0:(e=!1,m+="<li>El <strong>campo nombre o razón social</strong> es obligatorio</li>"),vLongitud(k,"Ingrese 13 caracteres",13,13)&&vExpresion(k,/^(([A-Z]|[a-z]|\s){1})(([A-Z]|[a-z]){3})([0-9]{6})((([A-Z]|[a-z]|[0-9]){3}))\.?$/,"Ingrese un RFC valido")?e=!0:(e=!1,m+="<li>Ingrese un  <strong>RFC</strong> valido</li>"),vLongitud(l,"Ingrese de 3 a 30 caracteres",3,40)?e=!0:(e=!1,m+="<li>El <strong>campo actividad</strong> es obligatorio</li>"),vLongitud(n,"Ingrese de 3 a 30 caracteres",3,30)?e=!0:(e=!1,m+="<li>El <strong>campo calle</strong> es obligatorio</li>"),vLongitud(o,"Ingrese de 3 a 30 caracteres",3,30)?e=!0:(e=!1,m+="<li>El <strong>delegacion</strong> es obligatorio</li>"),vLongitud(p,"Ingrese de 3 a 30 caracteres",3,30)?e=!0:(e=!1,m+="<li>El <strong>ciudad</strong> es obligatorio</li>"),vLongitud(q,"Ingrese de 3 a 30 caracteres",7,12)?e=!0:(e=!1,m+="<li>El <strong>telefono</strong> es obligatorio</li>"),m+="</ul>","<ul></ul>"==m){var s=$("#frmdatosadicionales").serializeArray();$.ajax({type:"post",url:"get_Insert_formularios",data:s,success:function(){a();var b=window.location.href;b.includes("get_form_datos_adicionales")||b.includes("get_Formulario_update")?window.location.href=document.referrer:window.location.href="<?=base_url('expediente/mostrar_pagina_expedientes') ?>"},error:function(a,b,c){console.log(c)}})}else $("#validacion").html(m),$("#mod-warning").modal({show:!0})}),$(document).on("click",".editarda",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-idexpediente"),c=$(this).attr("data-persona"),d=$(this).attr("data-edit"),e=$(this).attr("data-table");params={},console.log(params.id=a),console.log(params.persona=c),console.log(params.action=d),params.table=e,params.idexpediente=b,window.location.href="get_Formulario_update?persona="+c+"&idexpediente="+b+"&table="+e+"&id="+a+"&action="+d}),$(document).on("click",".adicionalpdf",function(){var a=$(this).attr("data-pdf"),b=$(this).attr("data-idexpediente"),c=$(this).attr("data-persona"),d=$(this).attr("data-edit"),e=$(this).attr("data-table");params={},console.log(params.id=a),console.log(params.persona=c),console.log(params.action=d),params.table=e,params.idexpediente=b,$("#datosadicionales").load("get_Formulario_pdf",params,function(){})}),$("#form-datos").submit(function(a){a.preventDefault(),form_datos=$(this).serializeArray(),console.log("Form Datos Generales activado"),$.ajax({type:"post",dataType:"json",url:"get_insert_datos_generales",data:form_datos,success:function(a){1==a.respuesta?alert("Datos guardados correctamente"):alert("Hubo un error al guardar, intenta mas tarde.")},error:function(a,b,c){console.log("Hubo un error al guardar, intenta mas tarde.!"),console.log(c)},complete:function(){console.log("Ajax realizado complete")}})}),$(document).on("click","#new_frecuencia_pago",function(a){$(this).attr("data-new");params={},$("#mb-frecuencia").load("get_nuevo_frecuencia_pago",params,function(){console.log("nuevo frecuencia pago")})}),$(document).on("click",".editar_frecuencia_pago",function(a){var b=$(this).attr("data-id"),c=$(this).attr("data-edit");params={},console.log(params.id=b),console.log(params.action=c),$("#mb-frecuencia").load("get_update_frecuencia_pago",params,function(){console.log("editar "+b)})}),$(document).on("click",".editar_actividad",function(a){var b=$(this).attr("data-id"),c=$(this).attr("data-edit");params={},console.log(params.id=b),console.log(params.action=c),$("#mbactividad").load("get_update_actividad",params,function(){console.log("editar "+b)})}),$(document).on("click","#new_producto",function(){$(this).attr("data-new");params={},$("#form-primary-productos .modal-body").load("get_nuevo_producto",params,function(){console.log("Nuevo producto")})}),$("#form-productos").submit(function(b){b.preventDefault();var c=$("#form-productos").serializeArray();console.log("Form Productos"),$.ajax({type:"post",dataType:"json",url:"get_Insert_Nuevo_Producto",data:c,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$(document).on("click",".edit_producto",function(a){var b=$(this).attr("data-id"),c=$(this).attr("data-edit");params={},console.log(params.id=b),console.log(params.action=c),$("#mb-productos").load("get_update_producto",params,function(){console.log("editar "+b)})}),$(document).on("click","#new_tipo_persona",function(){$(this).attr("data-new");params={},$(".modal-body").load("get_nuevo_tipo_persona",params,function(){console.log("nuevo tipo persona")})}),$("#form-tipo-persona").submit(function(b){b.preventDefault();var c=$("#form-tipo-persona").serializeArray();console.log("Form tipo persona"),$.ajax({type:"post",dataType:"json",url:"get_insert_tipo_persona",data:c,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$(document).on("click",".editar_tipo_persona",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-edit");params={},console.log(params.id=a),console.log(params.action=b),$("#mb-tipo-persona").load("get_update_tipo_persona",params,function(){console.log("editar "+a)})}),$(document).on("click",".editar_estado",function(a){var b=$(this).attr("data-id"),c=$(this).attr("data-edit");params={},console.log(params.id=b),console.log(params.action=c),$("#mb-estado").load("get_update_estado",params)}),$(document).on("click",".editpais",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-edit");params={},params.id=a,params.action=b,$("#mpaises").load("get_update_pais",params,function(){console.log("editar "+a)})}),$(document).on("click","#new_movimiento",function(){$(this).attr("data-new");params={},$(".modal-body").load("get_nuevo_movimiento",params,function(){console.log("nuevo movimiento")})}),$("#form-estado").submit(function(b){b.preventDefault();var c=$(this).serializeArray();console.log("Form estados"),$.ajax({type:"post",dataType:"json",url:"get_insert_estado",data:c,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$("#form-pais").submit(function(b){b.preventDefault();var c=$(this).serializeArray();console.log("Form paises"),$.ajax({type:"post",dataType:"json",url:"get_insert_pais",data:c,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$("#form-movimientos").submit(function(b){b.preventDefault();var c=$("#form-movimientos").serializeArray();console.log("Form movimiento"),$.ajax({type:"post",dataType:"json",url:"get_insert_movimiento",data:c,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$(document).on("click",".editar_movimiento",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-edit");params={},console.log(params.id=a),console.log(params.action=b),$("#mb-movimiento").load("get_update_movimiento",params,function(){console.log("editar "+a)})}),$("#form-frecuencia-pago").on("submit",function(b){b.preventDefault();var d=($(this),$("#form-frecuencia-pago").serializeArray());console.log("Form frecuencia pago"),$.ajax({type:"post",dataType:"json",url:"get_insert_frecuencia_pago",data:d,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$(document).on("click","#new_transaccionalidad",function(){$(this).attr("data-new");params={},$(".modal-body").load("get_nuevo_transaccionalidad",params,function(){console.log("nuevo transaccionalidad")})}),$("#form-transaccionalidad").submit(function(b){b.preventDefault();var c=$("#form-transaccionalidad").serializeArray();console.log("Form transaccionalidad"),$.ajax({type:"post",dataType:"json",url:"get_insert_transaccionalidad",data:c,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$(document).on("click",".editar_transaccionalidad",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-edit");params={},console.log(params.id=a),console.log(params.action=b),$("#mb-transaccionalidad").load("get_update_transaccionalidad",params,function(){console.log("editar "+a)})}),$(document).on("click","#new_nopersonas",function(){$(this).attr("data-new");params={},$("#mbnopersonas").load("get_nuevo_nopersonas",params,function(){console.log("nuevo nopersonas")})});$("#datatable-nopersonas").DataTable();$("#form-nopersonas").submit(function(b){b.preventDefault();var c=$("#form-nopersonas").serializeArray();console.log("Form nopersonas"),$.ajax({type:"post",dataType:"json",url:"get_insert_nopersonas",data:c,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$(document).on("click",".editar_nopersonas",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-edit");params={},console.log(params.id=a),console.log(params.action=b),$("#mb-nopersonas").load("get_update_nopersonas",params,function(){console.log("editar "+a)})}),$(document).on("click","#new_actividad",function(){$(this).attr("data-new");params={},$(".modal-body").load("get_nuevo_actividad",params,function(){console.log("nuevo actividad")})}),$("#form-actividad").submit(function(b){b.preventDefault();var c=$("#form-actividad").serializeArray();console.log("Form actividad"),$.ajax({type:"post",dataType:"json",url:"get_insert_actividad",cache:!1,data:c,success:function(b){a(),0==b.respuesta?alert(b.mensaje):(alert(b.mensaje),location.reload(!0))},error:function(){alert("Error general del sistema, intente mas tarde.")}})}),$("#form_cuestionario").submit(function(a){a.preventDefault(),form_datos=$(this).serializeArray(),$.ajax({type:"post",dataType:"json",url:"insertCuestionario",data:form_datos,success:function(a){1==a?alert("Datos guardados correctamente"):alert("Hubo un error al guardar, intenta mas tarde.")},error:function(a,b,c){console.log("Hubo un error al guardar, intenta mas tarde.!"),console.log(c)},complete:function(){console.log("Ajax realizado complete")}})}),$("#form_visita").submit(function(a){a.preventDefault(),form_datos=$(this).serializeArray(),console.log("Form Visita activado"),$.ajax({type:"post",dataType:"json",url:"insertFormatoVisita",data:form_datos,success:function(a){1==a?alert("Datos guardados correctamente"):alert("Hubo un error al guardar, intenta mas tarde.")},error:function(a,b,c){console.log("Hubo un error al guardar, intenta mas tarde.!"),console.log(c)},complete:function(){console.log("Ajax realizado complete")}})}),$(".list-alertas").on("click",function(a){a.preventDefault();var b=$(this).data("id"),c="listado_documentos_alertas?id="+b;document.location=c})});var langTabl="//cdn.datatables.net/plug-ins/1.10.7/i18n/Spanish.json",cdnSwf="//cdn.datatables.net/tabletools/2.2.2/swf/copy_csv_xls_pdf.swf";$("#datatable-expedientes").dataTable({language:{url:langTabl},lengthMenu:[[50,100,-1],[50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-clientes").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-creditos").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-detallemov").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-alertas").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#tabla-productos").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-frecuencia").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-nopersonas").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-actividad").dataTable({language:{url:langTabl},lengthMenu:[[-1],["Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-mmovimientos").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-estados").dataTable({language:{url:langTabl},lengthMenu:[[-1],["Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-paises").dataTable({language:{url:langTabl},lengthMenu:[[-1],["Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-oi").dataTable({language:{url:langTabl},lengthMenu:[[5,10,25,-1],[5,10,25,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-or").dataTable({language:{url:langTabl},lengthMenu:[[5,10,25,-1],[5,10,25,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-ip").dataTable({language:{url:langTabl},lengthMenu:[[5,10,25,-1],[5,10,25,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-24").dataTable({language:{url:langTabl},lengthMenu:[[5,10,25,-1],[5,10,25,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-buzon").dataTable({language:{url:langTabl},lengthMenu:[[5,10,25,-1],[5,10,25,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-agrup-cred").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-mov-cred").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]]}),$("#datatable-acum-mov").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-datos-adicionales").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-agrcreditos").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-autorizaciones").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-avisos-p").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-avisos-r").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#table-reporte-mensual, #table-reporte-semestral").dataTable({language:{url:langTabl},lengthMenu:[[50,100,150,-1],[50,100,150,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-mislistas").dataTable({language:{url:langTabl},lengthMenu:[[5,10,50,-1],[5,10,50,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatableFideicomisos").dataTable({language:{url:langTabl},lengthMenu:[[5,10,50,-1],[5,10,50,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}}),$("#datatable-prospectos").dataTable({language:{url:langTabl},lengthMenu:[[5,10,50,-1],[5,10,50,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}});$("#datatables-profesiones").dataTable({language:{url:langTabl},lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],dom:'T<"clear">lfrtip',tableTools:{sSwfPath:cdnSwf}});